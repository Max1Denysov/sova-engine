//=========================================================================
// EUC-jp 2 Unicode table
//=========================================================================

#include <_include/Cp2Uni.h>

// JIS X 0201
const uint16_t tabJisX02012Uni[128]={
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', // 0x80 - 0x8F
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', // 0x90 - 0x9F
'?', // 0xA0
0xFF61, // 0xA1 HALFWIDTH IDEOGRAPHIC FULL STOP
0xFF62, // 0xA2 HALFWIDTH LEFT CORNER BRACKET
0xFF63, // 0xA3 HALFWIDTH RIGHT CORNER BRACKET
0xFF64, // 0xA4 HALFWIDTH IDEOGRAPHIC COMMA
0xFF65, // 0xA5 HALFWIDTH KATAKANA MIDDLE DOT
0xFF66, // 0xA6 HALFWIDTH KATAKANA LETTER WO
0xFF67, // 0xA7 HALFWIDTH KATAKANA LETTER SMALL A
0xFF68, // 0xA8 HALFWIDTH KATAKANA LETTER SMALL I
0xFF69, // 0xA9 HALFWIDTH KATAKANA LETTER SMALL U
0xFF6A, // 0xAA HALFWIDTH KATAKANA LETTER SMALL E
0xFF6B, // 0xAB HALFWIDTH KATAKANA LETTER SMALL O
0xFF6C, // 0xAC HALFWIDTH KATAKANA LETTER SMALL YA
0xFF6D, // 0xAD HALFWIDTH KATAKANA LETTER SMALL YU
0xFF6E, // 0xAE HALFWIDTH KATAKANA LETTER SMALL YO
0xFF6F, // 0xAF HALFWIDTH KATAKANA LETTER SMALL TU
0xFF70, // 0xB0 HALFWIDTH KATAKANA-HIRAGANA PROLONGED SOUND MARK
0xFF71, // 0xB1 HALFWIDTH KATAKANA LETTER A
0xFF72, // 0xB2 HALFWIDTH KATAKANA LETTER I
0xFF73, // 0xB3 HALFWIDTH KATAKANA LETTER U
0xFF74, // 0xB4 HALFWIDTH KATAKANA LETTER E
0xFF75, // 0xB5 HALFWIDTH KATAKANA LETTER O
0xFF76, // 0xB6 HALFWIDTH KATAKANA LETTER KA
0xFF77, // 0xB7 HALFWIDTH KATAKANA LETTER KI
0xFF78, // 0xB8 HALFWIDTH KATAKANA LETTER KU
0xFF79, // 0xB9 HALFWIDTH KATAKANA LETTER KE
0xFF7A, // 0xBA HALFWIDTH KATAKANA LETTER KO
0xFF7B, // 0xBB HALFWIDTH KATAKANA LETTER SA
0xFF7C, // 0xBC HALFWIDTH KATAKANA LETTER SI
0xFF7D, // 0xBD HALFWIDTH KATAKANA LETTER SU
0xFF7E, // 0xBE HALFWIDTH KATAKANA LETTER SE
0xFF7F, // 0xBF HALFWIDTH KATAKANA LETTER SO
0xFF80, // 0xC0 HALFWIDTH KATAKANA LETTER TA
0xFF81, // 0xC1 HALFWIDTH KATAKANA LETTER TI
0xFF82, // 0xC2 HALFWIDTH KATAKANA LETTER TU
0xFF83, // 0xC3 HALFWIDTH KATAKANA LETTER TE
0xFF84, // 0xC4 HALFWIDTH KATAKANA LETTER TO
0xFF85, // 0xC5 HALFWIDTH KATAKANA LETTER NA
0xFF86, // 0xC6 HALFWIDTH KATAKANA LETTER NI
0xFF87, // 0xC7 HALFWIDTH KATAKANA LETTER NU
0xFF88, // 0xC8 HALFWIDTH KATAKANA LETTER NE
0xFF89, // 0xC9 HALFWIDTH KATAKANA LETTER NO
0xFF8A, // 0xCA HALFWIDTH KATAKANA LETTER HA
0xFF8B, // 0xCB HALFWIDTH KATAKANA LETTER HI
0xFF8C, // 0xCC HALFWIDTH KATAKANA LETTER HU
0xFF8D, // 0xCD HALFWIDTH KATAKANA LETTER HE
0xFF8E, // 0xCE HALFWIDTH KATAKANA LETTER HO
0xFF8F, // 0xCF HALFWIDTH KATAKANA LETTER MA
0xFF90, // 0xD0 HALFWIDTH KATAKANA LETTER MI
0xFF91, // 0xD1 HALFWIDTH KATAKANA LETTER MU
0xFF92, // 0xD2 HALFWIDTH KATAKANA LETTER ME
0xFF93, // 0xD3 HALFWIDTH KATAKANA LETTER MO
0xFF94, // 0xD4 HALFWIDTH KATAKANA LETTER YA
0xFF95, // 0xD5 HALFWIDTH KATAKANA LETTER YU
0xFF96, // 0xD6 HALFWIDTH KATAKANA LETTER YO
0xFF97, // 0xD7 HALFWIDTH KATAKANA LETTER RA
0xFF98, // 0xD8 HALFWIDTH KATAKANA LETTER RI
0xFF99, // 0xD9 HALFWIDTH KATAKANA LETTER RU
0xFF9A, // 0xDA HALFWIDTH KATAKANA LETTER RE
0xFF9B, // 0xDB HALFWIDTH KATAKANA LETTER RO
0xFF9C, // 0xDC HALFWIDTH KATAKANA LETTER WA
0xFF9D, // 0xDD HALFWIDTH KATAKANA LETTER N
0xFF9E, // 0xDE HALFWIDTH KATAKANA VOICED SOUND MARK
0xFF9F, // 0xDF HALFWIDTH KATAKANA SEMI-VOICED SOUND MARK
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', // 0xE0 - 0xEF
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?'  // 0xF0 - 0xFF
};

const uint16_t tabJisX2UniDefPg[128]={
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?',
'?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?', '?'
};

// JIS X 0208
#include "tabJisX02082uni.c"
const uint16_t * const tabJisX02082Uni[128] = {
tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX2UniDefPg, tabJisX0208_21Pg, tabJisX0208_22Pg, tabJisX0208_23Pg, tabJisX0208_24Pg, tabJisX0208_25Pg, tabJisX0208_26Pg, tabJisX0208_27Pg, tabJisX0208_28Pg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX0208_30Pg, tabJisX0208_31Pg, tabJisX0208_32Pg, tabJisX0208_33Pg, tabJisX0208_34Pg, tabJisX0208_35Pg, tabJisX0208_36Pg, tabJisX0208_37Pg, tabJisX0208_38Pg, tabJisX0208_39Pg, tabJisX0208_3APg, tabJisX0208_3BPg, tabJisX0208_3CPg, tabJisX0208_3DPg, tabJisX0208_3EPg, tabJisX0208_3FPg,
tabJisX0208_40Pg, tabJisX0208_41Pg, tabJisX0208_42Pg, tabJisX0208_43Pg, tabJisX0208_44Pg, tabJisX0208_45Pg, tabJisX0208_46Pg, tabJisX0208_47Pg, tabJisX0208_48Pg, tabJisX0208_49Pg, tabJisX0208_4APg, tabJisX0208_4BPg, tabJisX0208_4CPg, tabJisX0208_4DPg, tabJisX0208_4EPg, tabJisX0208_4FPg,
tabJisX0208_50Pg, tabJisX0208_51Pg, tabJisX0208_52Pg, tabJisX0208_53Pg, tabJisX0208_54Pg, tabJisX0208_55Pg, tabJisX0208_56Pg, tabJisX0208_47Pg, tabJisX0208_58Pg, tabJisX0208_59Pg, tabJisX0208_5APg, tabJisX0208_5BPg, tabJisX0208_5CPg, tabJisX0208_5DPg, tabJisX0208_5EPg, tabJisX0208_5FPg,
tabJisX0208_60Pg, tabJisX0208_61Pg, tabJisX0208_62Pg, tabJisX0208_63Pg, tabJisX0208_64Pg, tabJisX0208_65Pg, tabJisX0208_66Pg, tabJisX0208_67Pg, tabJisX0208_68Pg, tabJisX0208_69Pg, tabJisX0208_6APg, tabJisX0208_6BPg, tabJisX0208_6CPg, tabJisX0208_6DPg, tabJisX0208_6EPg, tabJisX0208_6FPg,
tabJisX0208_70Pg, tabJisX0208_71Pg, tabJisX0208_72Pg, tabJisX0208_73Pg, tabJisX0208_74Pg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg
};

// JIS X 0212
#include "tabJisX02122uni.c"
const uint16_t * const tabJisX02122Uni[128] = {
tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX0212_22Pg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX0212_26Pg, tabJisX0212_27Pg, tabJisX2UniDefPg, tabJisX0212_29Pg, tabJisX0212_2APg, tabJisX0212_2BPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX0212_30Pg, tabJisX0212_31Pg, tabJisX0212_32Pg, tabJisX0212_33Pg, tabJisX0212_34Pg, tabJisX0212_35Pg, tabJisX0212_36Pg, tabJisX0212_37Pg, tabJisX0212_38Pg, tabJisX0212_39Pg, tabJisX0212_3APg, tabJisX0212_3BPg, tabJisX0212_3CPg, tabJisX0212_3DPg, tabJisX0212_3EPg, tabJisX0212_3FPg,
tabJisX0212_40Pg, tabJisX0212_41Pg, tabJisX0212_42Pg, tabJisX0212_43Pg, tabJisX0212_44Pg, tabJisX0212_45Pg, tabJisX0212_46Pg, tabJisX0212_47Pg, tabJisX0212_48Pg, tabJisX0212_49Pg, tabJisX0212_4APg, tabJisX0212_4BPg, tabJisX0212_4CPg, tabJisX0212_4DPg, tabJisX0212_4EPg, tabJisX0212_4FPg,
tabJisX0212_50Pg, tabJisX0212_51Pg, tabJisX0212_52Pg, tabJisX0212_53Pg, tabJisX0212_54Pg, tabJisX0212_55Pg, tabJisX0212_56Pg, tabJisX0212_47Pg, tabJisX0212_58Pg, tabJisX0212_59Pg, tabJisX0212_5APg, tabJisX0212_5BPg, tabJisX0212_5CPg, tabJisX0212_5DPg, tabJisX0212_5EPg, tabJisX0212_5FPg,
tabJisX0212_60Pg, tabJisX0212_61Pg, tabJisX0212_62Pg, tabJisX0212_63Pg, tabJisX0212_64Pg, tabJisX0212_65Pg, tabJisX0212_66Pg, tabJisX0212_67Pg, tabJisX0212_68Pg, tabJisX0212_69Pg, tabJisX0212_6APg, tabJisX0212_6BPg, tabJisX0212_6CPg, tabJisX0212_6DPg, tabJisX2UniDefPg, tabJisX2UniDefPg,
tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg, tabJisX2UniDefPg
};

uint32_t EucJpSeq2Unicode( const unsigned char *chars, int charsCount, int *charsProcessed ){
    if(charsCount<=0){ //here: wrong data, do nothing
        *charsProcessed=0;
        return 0;
    }
    if(*chars<0x80){ //ASCII set, return character as is
        *charsProcessed=1;
        return (uint32_t)*chars;
    }
    if(charsCount==1){ //here: wrong data, return '?' as a result, because multibyte character is expected
        *charsProcessed=1;
        return (uint32_t)'?';
    }
    if(*chars==0x8E){ //use mapping for upper part of JIS X 0201, two-byte character
        *charsProcessed=2;
        ++chars;
        if(*chars<0x80) //character with the most significant bit set is expected
            return (uint32_t)'?';
        return (uint32_t)tabJisX02012Uni[*chars&0x7F];
    }
    if(*chars==0x8F){ //use JIS X 0212 mapping, three-bytes character
        if(charsCount==2){ //here: wrong data, return '?' as a result, because multibyte character is expected
            *charsProcessed=2;
            return (uint32_t)'?';
        }
        *charsProcessed=3;
        ++chars;
        if(*chars<0x80) //character with the most significant bit set is expected
            return (uint32_t)'?';
        uint32_t pageNum=*chars&0x7F; //since jis encodings are stored in big-endian format, the page number comes first
        ++chars;
        if(*chars<0x80) //character with the most significant bit set is expected
            return (uint32_t)'?';
        return (uint32_t)tabJisX02122Uni[pageNum][*chars&0x7F];
    }
    else{ //use JIS X 0208 mapping, two-bytes character
        *charsProcessed=2;
        if(*chars<0x80) //character with the most significant bit set is expected
            return (uint32_t)'?';
        uint32_t pageNum=*chars&0x7F; //since jis encodings are stored in big-endian format, the page number comes first
        ++chars;
        if(*chars<0x80) //character with the most significant bit set is expected
            return (uint32_t)'?';
        return (uint32_t)tabJisX02082Uni[pageNum][*chars&0x7F];
    }
}
